type User @entity {
  "ID attribute is user public key"
  id: ID!
  totalTokens: BigInt!
  totalStakedTokens: BigInt!
  votingPower: BigInt!
  proposingPower: BigInt!
  tokenVotingPower: BigInt!
  tokenProposingPower: BigInt!
  stakedTokenVotingPower: BigInt!
  stakedTokenProposingPower: BigInt!
}

type Proposal @entity {
  "ID attribute is proposal ID"
  id: ID!
}

type ProposalVote @entity {
  "ID attribute is a function of user ID and proposal ID, e.g. {user.id}-{proposal.id}"
  id: ID!
  proposal: Proposal!
  user: User!
  support: Boolean!
  votingPower: BigInt!
}

type RewardsClaimed @entity {
  "ID attribute is a function of user ID and rewards claim number at the time of claiming, e.g. {user.id}-{incentivesModule}-{claimTimestamp}"
  id: ID!
  user: User!
  incentivesModule: IncentivesModule!
  claimTimestamp: BigInt!
  rewards: BigInt!
}

enum IncentivesModule {
  MerkleDistributor
  SafetyModule
  LiquidityStaking
}

type HourlydYdXTokenExchangeRate @entity {
  "ID attribute of the exchange rate entry {timestamp_hour_zero}"
  id: ID!
  "DYDX/USDC exchange rate"
  exchangeRateUSDC: BigDecimal!
  timestamp: Int!
  blockNumber: Int!
}

interface TreasuryTransaction {
  id: ID!
  to: User!
  from: User!
  amount: BigInt!
  amountUSD: BigDecimal!
  timestamp: BigInt!
  blockNumber: BigInt!
  blockHash: Bytes!
  transactionHash: Bytes!
}

type CommunityTreasuryTransaction implements TreasuryTransaction @entity {
  id: ID!
  to: User!
  from: User!
  amount: BigInt!
  amountUSD: BigDecimal!
  timestamp: BigInt!
  blockNumber: BigInt!
  blockHash: Bytes!
  transactionHash: Bytes!
}

type GrantsProgramTreasuryTransaction implements TreasuryTransaction @entity {
  id: ID!
  to: User!
  from: User!
  amount: BigInt!
  amountUSD: BigDecimal!
  timestamp: BigInt!
  blockNumber: BigInt!
  blockHash: Bytes!
  transactionHash: Bytes!
}

type CurrentDYDXPrice @entity {
  "hardcoded to dydx"
  id: ID!
  value: BigDecimal!
}

type CommunityTreasuryHistoricalBalance @entity {
  id: ID!
  timestamp: BigInt!
  transactionHash: Bytes!
  balance: BigInt!
}

type GrantsProgramTreasuryHistoricalBalance @entity {
  id: ID!
  timestamp: BigInt!
  transactionHash: Bytes!
  balance: BigInt!
}
